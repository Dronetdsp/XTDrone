#### 概述

1. 实现功能
    复合翼编队跟踪无人车
2. 注意事项
    受限于导航律和飞机参数设计，要求无人车的速度不能太快。剧烈运动效果也有待提升；
    输入输出限幅的时候要注意QGC里边对飞机模型参数的设定；
    这里与XTDrone的关系只在于使用了和XTDrone一样的PX4，ROS等配置环境；
    需要先配置好XTDrone中关于带二维码那个无人车的部署，因为直接用PX4的无人车电脑带不动；
    无人车的控制可以用ugv_random_move.py文件(无人车随机运动，运动速度，角速度都是随机值)，  
    也可以用XTDrone里边的无人车键盘控制程序；
3. 实现逻辑
    首先订阅所需的mavros消息；然后基于导航律，得到速度和角速度指令；然后将这些指令转化为姿态加油门；  
    最后将姿态和油门指令发送给PX4
4. 启动
    在配置好依赖后，编译完成后，直接在scripts目录下 bash multi_uav_sim_ba_3vtol.sh即可；
    由于时间原因，并为写好全部的键盘控制指令，可以预先通过QGC规划好一条直线任务飞行轨迹，  
    然后通过QGC实现Mission下的起飞，待无人机转化到固定翼模式后，在通过键盘输入切换到offboard模式，并同时选择队形
5. 重点
    你们所需要的重点部分应该在abs_formation_controller.cpp中的control_law()函数。别的部分，比如自定义消息类型，  
    参数传递等都可以自己根据需求去改变；
6. 其他
    有一些关于代码的注意在代码注释中，整体框架来源于  
    https://github.com/lee-shun/fixed_wing_formation_control.git；
    代码的消息订阅等部分有很多冗余设置，可以只选择自身需要的；
    此代码还有很多可以完善的地方，比如参数的设定直接通过结构体赋值来改变了，键盘控制部分还不完善，  
    所用的TECS源码也不是最接近XTDrone环境的，函数架构还能进一步精简等，后续有机会继续改进；
    若做完一次仿真，重新启动后遇到一些意想不到的问题，可以试试rosclean purge。

#### bash及各个函数主要功能介绍

1. 在bash 文件中依次给出了所启动的C++功能，其对应的C++实现在muti_uav_sim文件中，通过这个文件的功能链接到指定的源码中，这样也对应了每个源码的功能了；
2. bash依次实现的功能是：编译源码；启动launch环境；订阅并向领机发送mavros消息(实现所需消息的订阅，飞行模式的切换，最终控制指令的发送)；领机消息的进一步封装(目的是对领机消息进行封装，因为所有从机都会使用这个信息，避免了混淆)；订阅并向1号从机发送消息；订阅并向2号从机发送消息；从机1号的主控程序(这里实现了整个的控制逻辑，就是前文概述部分的第三点逻辑。可以根据自身对主机的需求进一步添加主机的主控功能)；从机2号的主控程序；最后三个是切换领机和从机飞行模式和队形设定的(主要用到从Mission切换到Offboard的同时设定队形)。